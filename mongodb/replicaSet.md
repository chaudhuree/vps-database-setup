MongoDB-рждрзЗ transaction ржЪрж╛рж▓рж╛рждрзЗ рж╣рж▓рзЗ ржЕржмрж╢рзНржпржЗ replica set enable ржХрж░рждрзЗ рж╣рзЯред VPS-ржП MongoDB-рж░ replica set ржЪрж╛рж▓рзБ ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржзрж╛ржкржЧрзБрж▓рзЛ ржЕржирзБрж╕рж░ржг ржХрж░рзЛред ржЖржорж┐ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрж╛ржВрж▓рж╛рзЯ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐:

ЁЯФз рзз. MongoDB ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ
ржкрзНрж░ржержорзЗ VPS-ржП рж▓ржЧржЗржи ржХрж░рзЛ ржПржмржВ MongoDB-рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзЛ:

```
sudo nano /etc/mongod.conf
```
ржПрж░ ржоржзрзНржпрзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ replication ржЕржВрж╢ржЯрж┐ ржпрзЛржЧ ржХрж░рзЛ (уБкржерж╛ржХрж▓рзЗ ржирждрзБржи ржХрж░рзЗ рж▓рж┐ржЦрзЛ):

```
replication:
  replSetName: "rs0"
```

ЁЯФД рзи. MongoDB рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЛ
```
sudo systemctl restart mongod
```
ЁЯза рзй. Replica Set Initiate ржХрж░рзЛ
ржПржЦржи MongoDB shell ржП ржврзБржХрзЗ replica set рж╢рзБрж░рзБ ржХрж░рзЛ:

```
mongosh
```
рждрж╛рж░ржкрж░ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржжрж╛ржУ:

```
rs.initiate()
```
ржПрждрзЗ ржПржХржЯрж╛ ржбрж┐ржлрж▓рзНржЯ replica set rs0 рждрзИрж░рж┐ рж╣ржмрзЗ (ржЖржорж░рж╛ ржпрзЗржЯрж╛ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗ ржжрж┐рзЯрзЗржЫрж┐)ред

тЬЕ рзк. ржпрж╛ржЪрж╛ржЗ ржХрж░рзЛ replica set ржЪрж▓ржЫрзЗ ржХрж┐ржирж╛
```
rs.status()
```
ржПрждрзЗ ok: 1 ржжрзЗржЦрж╛рж▓рзЗ ржмрзБржЭржмрзЗ replica set ржХрж╛ржЬ ржХрж░ржЫрзЗред

ЁЯзк ржПржЦржи рждрзБржорж┐ transaction ржЗржЙржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ
MongoDB ржПржЦржи multi-document transaction рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░ржмрзЗ, ржпрзЗрж╣рзЗрждрзБ replica set enable рж╣рзЯрзЗржЫрзЗред

тЬи ржЕрждрж┐рж░рж┐ржХрзНржд ржЯрж┐ржкрж╕
Production ржП multiple nodes setup ржХрж░рж╛ ржЙржЪрж┐ржд, ржХрж┐ржирзНрждрзБ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржмрж╛ рж╕рж╛ржзрж╛рж░ржг ржмрзНржпржмрж╣рж╛рж░рзЗ single-node replica set ржХрж╛ржЬ ржХрж░рзЗред

ржпржжрж┐ Node.js (Mongoose) ржмрж╛ ржЕржирзНржп рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржЙржЬ ржХрж░рзЛ, connection URI рждрзЗ replicaSet=rs0 ржпрзБржХрзНржд ржХрж░рзЛред

ржЙржжрж╛рж╣рж░ржг:

```
mongodb://localhost:27017/yourDB?replicaSet=rs0
```
